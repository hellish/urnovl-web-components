import{k as b}from"./entry-preview-BcHUnPw7.js";import"./ur-linear-progress-D1MbxYtF.js";import"./ur-button-icon-DqyzIZEz.js";import"./ur-tooltip-DuFJ5Hb5.js";import{s as g,g as l}from"./chunk-L4EGOTBX-2Jzo53v8.js";import{d as y,H as k,c as r,h as t,a as x}from"./index-DddAbXmr.js";import"./index-DrFu-skq.js";import"./index-CIbCn1or.js";import"./class-map-CDMw4-pN.js";import"./get-7S0C3xNv.js";import"./watch-ByvFYHv8.js";import"./template-yncBVCyc.js";import"./button-base-CWeRpzKK.js";import"./if-defined-CL77Dv0Z.js";import"./anchor--mD29Q5y.js";import"./form-B80GgqR6.js";import"./index-BriiHZyV.js";import"./index-DsS9OQyQ.js";const v=`:host{--ur-color-background:var(--mdui-color-background);--ur-color-on-background:var(--mdui-color-on-background);--ur-color-primary:var(--mdui-color-primary);--ur-color-primary-container:var(--mdui-color-primary-container);--ur-color-on-surface-lite:var(--mdui-color-on-surface-lite);--ur-color-surface-container-high:var(--mdui-color-surface-container-high);display:block;color:rgb(var(--ur-color-on-background));background:rgb(var(--ur-color-background))}:host .player-container{display:flex;flex-direction:column;width:100%;gap:16px}:host .player-header{display:flex;align-items:center;gap:16px}:host .cover-image{width:80px;height:80px;border-radius:8px;overflow:hidden;flex-shrink:0}:host .cover-image img{width:100%;height:100%;object-fit:cover}:host .player-info{flex:1;overflow:hidden}:host .title{margin:0;font-size:22px;font-style:normal;font-weight:700;line-height:24px;letter-spacing:-0.262px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host .author{margin:8px 0 0 0;font-size:14px;color:rgb(var(--ur-color-on-surface-lite));white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host .chapter{margin:4px 0 0 0;font-size:12px;color:rgb(var(--ur-color-on-surface-lite));white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host .progress-container{width:100%}:host .progress-bar{height:4px;background-color:rgb(var(--ur-color-surface-container-high));border-radius:2px;position:relative;cursor:pointer;margin-bottom:8px;overflow:visible;}:host .progress-thumb{position:absolute;width:12px;height:12px;background-color:rgb(var(--ur-color-primary));border-radius:50%;top:50%;transform:translate(-50%, -50%);cursor:grab;box-shadow:0 2px 4px rgba(0, 0, 0, 0.2);z-index:2;transition:transform 0.1s ease}:host .progress-thumb:hover,:host .progress-thumb:active{transform:translate(-50%, -50%) scale(1.2);cursor:grabbing}:host .progress-bar:hover .progress-thumb{transform:translate(-50%, -50%) scale(1.2)}:host .progress-loaded{position:absolute;height:100%;background-color:rgba(var(--ur-color-primary), 0.3);left:0;top:0}:host .progress-current{position:absolute;height:100%;background-color:rgb(var(--ur-color-primary));left:0;top:0;border-radius:2px;transition:width 0.1s linear}:host .time-display{display:flex;justify-content:space-between;font-size:12px;color:rgb(var(--ur-color-on-surface-lite))}:host .controls{display:flex;flex-direction:column;gap:16px}:host .main-controls{display:flex;justify-content:center;align-items:center;gap:24px}:host .play-pause-button{--mdui-icon-size:28px}:host .secondary-controls{display:flex;justify-content:space-between;align-items:center}:host .volume-control{position:relative;display:flex;align-items:center;justify-content:center}:host .speed-options{position:absolute;bottom:100%;left:50%;transform:translateX(-50%);background-color:rgb(var(--ur-color-background));border-radius:8px;box-shadow:0 2px 10px rgba(0, 0, 0, 0.1);padding:8px;display:flex;flex-wrap:wrap;gap:4px;margin-bottom:8px;z-index:10;width:120px}:host .speed-option{background:none;border:none;padding:4px 8px;border-radius:4px;cursor:pointer;font-size:12px;color:rgb(var(--ur-color-on-background));transition:background-color 0.2s}:host .speed-option:hover{background-color:rgba(var(--ur-color-primary), 0.1)}:host .speed-option.active{background-color:rgb(var(--ur-color-primary-container));color:rgb(var(--ur-color-primary));font-weight:600}:host .volume-slider-container{border-radius:8px;z-index:10;display:flex;align-items:center;justify-content:center}:host .volume-slider{width:100px;height:4px;border-radius:2px;background-color:rgb(var(--ur-color-surface-container-high));outline:none}:host .volume-slider::-webkit-slider-thumb{appearance:none;width:16px;height:16px;border-radius:50%;background-color:rgb(var(--ur-color-primary));cursor:pointer}:host .volume-slider::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background-color:rgb(var(--ur-color-primary));cursor:pointer;border:none}@media (max-width: 480px){:host .player-container{gap:12px}:host .cover-image{width:64px;height:64px}:host .title{font-size:18px}:host .main-controls{gap:16px}}@keyframes placeholderAnimate{0%{background-position:-650px 0}100%{background-position:650px 0}}:host .title.loading{height:24px;margin:8px 0;border-radius:4px;animation-duration:1.7s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-timing-function:linear;animation-name:placeholderAnimate;background:linear-gradient(
        to right,
        rgba(var(--ur-color-on-background), 0.04) 2%,
        rgba(var(--ur-color-on-background), 0.12) 18%,
        rgba(var(--ur-color-on-background), 0.04) 33%
    );background-size:1000px}:host .author.loading,:host .chapter.loading{height:16px;width:70%;margin:8px 0;border-radius:4px;animation-duration:1.7s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-timing-function:linear;animation-name:placeholderAnimate;background:linear-gradient(
        to right,
        rgba(var(--ur-color-on-background), 0.04) 2%,
        rgba(var(--ur-color-on-background), 0.12) 18%,
        rgba(var(--ur-color-on-background), 0.04) 33%
    );background-size:1000px}`,T=class extends k{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.playerPlay=r(this,"playerPlay",7),this.playerPause=r(this,"playerPause",7),this.playerEnded=r(this,"playerEnded",7),this.playerTimeUpdate=r(this,"playerTimeUpdate",7),this.playerVolumeChange=r(this,"playerVolumeChange",7),this.playerRateChange=r(this,"playerRateChange",7),this.storyTitle="Audiobook Title",this.author="Author Name",this.chapterName="Chapter 1",this.playText="Play",this.pauseText="Pause",this.forwardText="Forward 15s",this.backwardText="Back 15s",this.speedText="Speed",this.volumeText="Volume",this.autoPlay=!1,this.showControls=!0,this.primaryColor="rgb(var(--ur-color-primary))",this.accentColor="rgb(var(--ur-color-primary-container))",this.darkMode=!1,this.isPlaying=!1,this.currentTime=0,this.duration=0,this.loadedPercentage=0,this.volume=.8,this.playbackRate=1,this.handlePlayPause=()=>{this.togglePlay()},this.handleSkipForward=()=>{this.skipForward()},this.handleSkipBackward=()=>{this.skipBackward()},this.handleProgressClick=e=>{const a=e.currentTarget.getBoundingClientRect(),n=(e.clientX-a.left)/a.width;this.seekTo(n*this.duration)},this.handleVolumeChange=e=>{const o=e.target;this.setVolume(parseFloat(o.value))},this.handlePlaybackRateChange=e=>{this.setPlaybackRate(e)},this.onError=e=>{console.error("Audio error:",e),console.error("Error code:",this.audioElement.error?this.audioElement.error.code:"unknown"),console.error("Error message:",this.audioElement.error?this.audioElement.error.message:"unknown")},this.onTimeUpdate=()=>{this.currentTime=this.audioElement.currentTime,this.playerTimeUpdate.emit({currentTime:this.currentTime,duration:this.duration})},this.onLoadedMetadata=()=>{this.duration=this.audioElement.duration},this.onProgress=()=>{if(this.audioElement.buffered.length>0){const e=this.audioElement.buffered.end(this.audioElement.buffered.length-1);this.loadedPercentage=e/this.duration*100}},this.onEnded=()=>{this.isPlaying=!1,this.playerEnded.emit()},this.onPlay=()=>{this.isPlaying=!0},this.onPause=()=>{this.isPlaying=!1},this.isDragging=!1,this.handleThumbMouseDown=e=>{e.stopPropagation(),this.isDragging=!0,document.addEventListener("mousemove",this.handleThumbMouseMove),document.addEventListener("mouseup",this.handleThumbMouseUp)},this.handleThumbMouseMove=e=>{if(!this.isDragging)return;const a=this.element.shadowRoot.querySelector(".progress-bar").getBoundingClientRect(),n=Math.max(0,Math.min(1,(e.clientX-a.left)/a.width));this.seekTo(n*this.duration)},this.handleThumbMouseUp=()=>{this.isDragging=!1,document.removeEventListener("mousemove",this.handleThumbMouseMove),document.removeEventListener("mouseup",this.handleThumbMouseUp)}}onSourceChange(){this.audioElement&&(this.audioElement.load(),this.autoPlay&&this.play())}async play(){if(this.audioElement)try{console.log("Attempting to play audio from:",this.src),await this.audioElement.play(),this.isPlaying=!0,this.playerPlay.emit(),console.log("Audio playback started successfully")}catch(e){console.error("Failed to play audio:",e),this.isPlaying=!1}else console.error("Audio element not initialized")}async pause(){this.audioElement&&(this.audioElement.pause(),this.isPlaying=!1,this.playerPause.emit())}async togglePlay(){this.isPlaying?await this.pause():await this.play()}async seekTo(e){this.audioElement&&(this.audioElement.currentTime=e)}async setVolume(e){this.audioElement&&(this.volume=Math.max(0,Math.min(1,e)),this.audioElement.volume=this.volume,this.playerVolumeChange.emit({volume:this.volume}))}async setPlaybackRate(e){this.audioElement&&(this.playbackRate=e,this.audioElement.playbackRate=e,this.playerRateChange.emit({rate:e}))}async skipForward(e=15){this.audioElement&&(this.audioElement.currentTime=Math.min(this.audioElement.currentTime+e,this.audioElement.duration))}async skipBackward(e=15){this.audioElement&&(this.audioElement.currentTime=Math.max(this.audioElement.currentTime-e,0))}componentDidLoad(){this.setupAudioElement(),this.audioRef?(this.audioElement=this.audioRef,this.audioElement.volume=this.volume,this.audioElement.playbackRate=this.playbackRate,console.log("Audio element initialized from DOM reference"),this.autoPlay&&this.play()):console.error("Audio reference not found in the DOM")}disconnectedCallback(){this.cleanupAudioElement()}setupAudioElement(){console.log("Setting up audio element with source:",this.src)}cleanupAudioElement(){this.audioElement&&(this.audioElement.removeEventListener("timeupdate",this.onTimeUpdate),this.audioElement.removeEventListener("loadedmetadata",this.onLoadedMetadata),this.audioElement.removeEventListener("progress",this.onProgress),this.audioElement.removeEventListener("ended",this.onEnded),this.audioElement.removeEventListener("play",this.onPlay),this.audioElement.removeEventListener("pause",this.onPause),this.audioElement.pause())}formatTime(e){const o=Math.floor(e/60),a=Math.floor(e%60);return`${o}:${a<10?"0":""}${a}`}render(){const e=this.darkMode?"dark-theme":"light-theme";return t(x,{key:"22e03bc3983594633a4bd964257141de1f77c6b8",class:e,ref:o=>this.element=o},t("audio",{key:"a623eaf3634625ad3abe85e7837632f8ee4ba8b2",ref:o=>this.audioRef=o,src:this.src,preload:"auto",onTimeUpdate:this.onTimeUpdate,onLoadedMetaData:this.onLoadedMetadata,onProgress:this.onProgress,onEnded:this.onEnded,onPlay:this.onPlay,onPause:this.onPause,onError:this.onError,style:{display:"none"}}),t("div",{key:"f4c743f1dc71bddf0b66e23ef6cbb70ab6f019ce",class:"player-container"},t("div",{key:"2bff9764499a286f18fcf16728c2f0cff051ce7e",class:"player-header"},this.coverImage&&t("div",{key:"082f74dd9ea63c2250919de361ca2c0ae7444611",class:"cover-image"},t("img",{key:"9887dd9d1566f38cefeef732e252ade7807a9cbb",src:this.coverImage,alt:`${this.storyTitle} cover`})),t("div",{key:"d013d60748ab81fe3473c800f44e2e8d772bbffc",class:"player-info"},t("h2",{key:"a8c43a08ea2e18c81dc61c782919b70e12d57bff",class:"title"},this.storyTitle),t("p",{key:"72c37442abc83e1c49b5ebcabd1a58b9ec21e1aa",class:"author"},this.author),t("p",{key:"10cca699c284463634041a9191d3f08a57a3ddc5",class:"chapter"},this.chapterName))),t("div",{key:"7eed73a627605d38bb371192b32caa912ea55d9f",class:"progress-container"},t("div",{key:"9c8b9b08b087a86f99adf34305a42c2c2264eb10",class:"progress-bar",onClick:this.handleProgressClick},t("ur-linear-progress",{key:"2e6a9214ae6193492a803419f8e193ed2f90da07",value:this.currentTime,max:this.duration}),t("div",{key:"cc215d993af67c26c4c30b2691e9c4accffec52c",class:"progress-thumb",style:{left:`${this.currentTime/(this.duration||1)*100}%`,display:this.duration>0?"block":"none"},onMouseDown:this.handleThumbMouseDown})),t("div",{key:"0377658a8c64028816c11ea3010f2081baf176da",class:"time-display"},t("span",{key:"2b300385e3c7345b7c86ea9e08d9ca5cf33c0319",class:"current-time"},this.formatTime(this.currentTime)),t("span",{key:"6cd11366a177448ea23eb9f3a24127d4d8803bb7",class:"duration"},this.formatTime(this.duration)))),this.showControls&&t("div",{key:"237420d57894da62f056b85ff064cf26851c0364",class:"controls"},t("div",{key:"ddc965c1c15e90f7b9fb7357a2460b6ed3b4be55",class:"main-controls"},t("ur-button-icon",{key:"e4b2d6896f0e51f0d88b91db3c83fb04267e915b",icon:"skip_previous",variant:"standard",buttonHeight:"44px",buttonWidth:"44px",onClick:this.handleSkipBackward,"aria-label":this.backwardText}),t("ur-button-icon",{key:"e8cb24833d40264cf0df006fe12504366f889265",class:"play-pause-button",icon:this.isPlaying?"pause":"play_arrow",variant:"filled",buttonHeight:"56px",buttonWidth:"56px",onClick:this.handlePlayPause,"aria-label":this.isPlaying?this.pauseText:this.playText}),t("ur-button-icon",{key:"9c218115797f4db6902e5760381fcd539e64b83a",icon:"skip_next",variant:"standard",buttonHeight:"44px",buttonWidth:"44px",onClick:this.handleSkipForward,"aria-label":this.forwardText})),t("div",{key:"1a0cf196b35ab3fce246dd7ae6121cd5d51fb6ea",class:"secondary-controls"},t("div",{key:"6cc3d1853bac67b4602daa7e6d343f1796f9dfb0",class:"speed-control"},t("ur-tooltip",{key:"cc10cb3df1cab13dabca42e4a4879b3812d9d9a2",variant:"rich",placement:"top",trigger:"click"},t("ur-button-icon",{key:"22d2abb42826eea26c5e391f3a9760d8e8406cfc",slot:"",icon:"speed",variant:"standard",buttonHeight:"36px",buttonWidth:"36px","aria-label":this.speedText}),t("div",{key:"16dcb29c240136048967bb981d669792ddfcfb48",slot:"rich-content",class:"speed-options"},[.5,.75,1,1.25,1.5,2].map(o=>t("button",{class:{"speed-option":!0,active:this.playbackRate===o},onClick:()=>this.handlePlaybackRateChange(o)},o,"x"))))),t("div",{key:"11b40f73e51b5d07c1a5e33ad2fa83df307ef09c",class:"volume-control"},t("ur-button-icon",{key:"ac17849fe13f720777a0caffc684946c5df95a01",icon:this.volume===0?"volume_off":this.volume<.5?"volume_down":"volume_up",variant:"standard",buttonHeight:"36px",buttonWidth:"36px",onClick:this.handleVolumeChange,"aria-label":this.volumeText}),t("div",{key:"090440231f4234c5e4ba1b77ebc9222cf53767de",class:"volume-slider-container"},t("input",{key:"574df79fe37c344c303009d50fec8ad13fc02727",type:"range",min:"0",max:"1",step:"0.01",value:this.volume,class:"volume-slider",onInput:this.handleVolumeChange})))))))}static get watchers(){return{src:["onSourceChange"]}}static get style(){return v}};y(T,[1,"ur-player",{src:[1],storyTitle:[1,"story-title"],author:[1],coverImage:[1,"cover-image"],chapterName:[1,"chapter-name"],playText:[1,"play-text"],pauseText:[1,"pause-text"],forwardText:[1,"forward-text"],backwardText:[1,"backward-text"],speedText:[1,"speed-text"],volumeText:[1,"volume-text"],autoPlay:[4,"auto-play"],showControls:[4,"show-controls"],primaryColor:[1,"primary-color"],accentColor:[1,"accent-color"],darkMode:[4,"dark-mode"],isPlaying:[32],currentTime:[32],duration:[32],loadedPercentage:[32],volume:[32],playbackRate:[32],play:[64],pause:[64],togglePlay:[64],seekTo:[64],setVolume:[64],setPlaybackRate:[64],skipForward:[64],skipBackward:[64]},void 0,{src:["onSourceChange"]}]);const d={schemaVersion:"1.0.0",modules:[{kind:"javascript-module",path:"",declarations:[{kind:"class",name:"UrPlayer",tagName:"ur-player",customElement:!0,members:[{kind:"field",name:"src",type:"string",description:""},{kind:"field",name:"storyTitle",type:"string",description:"",default:"'Audiobook Title'"},{kind:"field",name:"author",type:"string",description:"",default:"'Author Name'"},{kind:"field",name:"coverImage",type:"string",description:""},{kind:"field",name:"chapterName",type:"string",description:"",default:"'Chapter 1'"},{kind:"field",name:"playText",type:"string",description:"",default:"'Play'"},{kind:"field",name:"pauseText",type:"string",description:"",default:"'Pause'"},{kind:"field",name:"forwardText",type:"string",description:"",default:"'Forward 15s'"},{kind:"field",name:"backwardText",type:"string",description:"",default:"'Back 15s'"},{kind:"field",name:"speedText",type:"string",description:"",default:"'Speed'"},{kind:"field",name:"volumeText",type:"string",description:"",default:"'Volume'"},{kind:"field",name:"autoPlay",type:"boolean",description:"",default:"false"},{kind:"field",name:"showControls",type:"boolean",description:"",default:"true"},{kind:"field",name:"primaryColor",type:"string",description:"",default:"'rgb(var(--ur-color-primary))'"},{kind:"field",name:"accentColor",type:"string",description:"",default:"'rgb(var(--ur-color-primary-container))'"},{kind:"field",name:"darkMode",type:"boolean",description:"",default:"false"}],events:[{kind:"event",name:"playerPlay",description:""},{kind:"event",name:"playerPause",description:""},{kind:"event",name:"playerEnded",description:""},{kind:"event",name:"playerTimeUpdate",description:""},{kind:"event",name:"playerVolumeChange",description:""},{kind:"event",name:"playerRateChange",description:""}]}],exports:[{kind:"js",name:"UrPlayer",declaration:{name:"UrPlayer",module:"src/components/ur-player/ur-player.tsx"}},{kind:"custom-element-definition",name:"ur-player",declaration:{name:"UrPlayer",module:"src/components/ur-player/ur-player.tsx"}}]}]};g({...l()||{},...d,modules:[...(l()||{}).modules||[],...d.modules]});const w=e=>b`
    <ur-player
        .src=${e.src}
        .storyTitle=${e.storyTitle}
        .author=${e.author}
        .chapterName=${e.chapterName}
        .coverImage=${e.coverImage}
        .playText=${e.playText}
        .pauseText=${e.pauseText}
        .forwardText=${e.forwardText}
        .backwardText=${e.backwardText}
        .speedText=${e.speedText}
        .volumeText=${e.volumeText}
        .autoPlay=${e.autoPlay}
        .showControls=${e.showControls}
        .primaryColor=${e.primaryColor}
        .accentColor=${e.accentColor}
        .darkMode=${e.darkMode}
    >
    </ur-player>
`,H={title:"urnovl/Business/Audio Player",render:w,argTypes:{src:{control:"text",description:"Audio source URL"},title:{control:"text",description:"Title of the audiobook/story"},author:{control:"text",description:"Author of the audiobook/story"},chapterName:{control:"text",description:"Current chapter name"},coverImage:{control:"text",description:"URL of the cover image"},playText:{control:"text",description:"Text for play button aria-label"},pauseText:{control:"text",description:"Text for pause button aria-label"},forwardText:{control:"text",description:"Text for forward button aria-label"},backwardText:{control:"text",description:"Text for backward button aria-label"},speedText:{control:"text",description:"Text for speed control aria-label"},volumeText:{control:"text",description:"Text for volume control aria-label"},autoPlay:{control:"boolean",description:"Whether the audio should autoplay"},showControls:{control:"boolean",description:"Whether to show the player controls"},primaryColor:{control:"text",description:"Primary color for the player"},accentColor:{control:"text",description:"Accent color for the player"},darkMode:{control:"boolean",description:"Whether to use dark mode"}}},i={args:{src:"https://storage.googleapis.com/media-session/sintel/snow-fight.mp3",storyTitle:"Hamlet",author:"William Shakespeare",chapterName:"Act 1",coverImage:"https://picsum.photos/200/300",playText:"Play",pauseText:"Pause",forwardText:"Forward 15s",backwardText:"Back 15s",speedText:"Speed",volumeText:"Volume",autoPlay:!1,showControls:!0,primaryColor:"rgb(var(--ur-color-primary))",accentColor:"rgb(var(--ur-color-primary-container))",darkMode:!1}},s={args:{...i.args,src:"https://storage.googleapis.com/media-session/big-buck-bunny/prelude.mp3",storyTitle:"The Alchemist",author:"Paulo Coelho",chapterName:"Chapter 3: The Desert",coverImage:"https://picsum.photos/id/237/200/300",darkMode:!0}};var c,u,p;i.parameters={...i.parameters,docs:{...(c=i.parameters)==null?void 0:c.docs,source:{originalSource:`{
  args: {
    src: 'https://storage.googleapis.com/media-session/sintel/snow-fight.mp3',
    storyTitle: 'Hamlet',
    author: 'William Shakespeare',
    chapterName: 'Act 1',
    coverImage: 'https://picsum.photos/200/300',
    playText: 'Play',
    pauseText: 'Pause',
    forwardText: 'Forward 15s',
    backwardText: 'Back 15s',
    speedText: 'Speed',
    volumeText: 'Volume',
    autoPlay: false,
    showControls: true,
    primaryColor: 'rgb(var(--ur-color-primary))',
    accentColor: 'rgb(var(--ur-color-primary-container))',
    darkMode: false
  }
}`,...(p=(u=i.parameters)==null?void 0:u.docs)==null?void 0:p.source}}};var h,m,f;s.parameters={...s.parameters,docs:{...(h=s.parameters)==null?void 0:h.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    src: 'https://storage.googleapis.com/media-session/big-buck-bunny/prelude.mp3',
    storyTitle: 'The Alchemist',
    author: 'Paulo Coelho',
    chapterName: 'Chapter 3: The Desert',
    coverImage: 'https://picsum.photos/id/237/200/300',
    darkMode: true
  }
}`,...(f=(m=s.parameters)==null?void 0:m.docs)==null?void 0:f.source}}};const W=["Default","DarkModeModernFiction"];export{s as DarkModeModernFiction,i as Default,W as __namedExportsOrder,H as default};
