import{m as k,r as b,$ as c,b as p,s as A,p as E,a as v,u as K,v as S,w as D,o as w,f as F}from"./get-D9DBDJjp.js";import"./ripple-mixin-Baxn-44g.js";function m(t){const e=k(),n=t.localName;return t.getAttribute("tabindex")==="-1"||t.hasAttribute("disabled")||t.hasAttribute("aria-disabled")&&t.getAttribute("aria-disabled")!=="false"||n==="input"&&t.getAttribute("type")==="radio"&&!t.hasAttribute("checked")||t.offsetParent===null||e.getComputedStyle(t).visibility==="hidden"?!1:(n==="audio"||n==="video")&&t.hasAttribute("controls")||t.hasAttribute("tabindex")||t.hasAttribute("contenteditable")&&t.getAttribute("contenteditable")!=="false"?!0:["button","input","select","textarea","a","audio","video","summary"].includes(n)}function L(t){const e=[];function n(o){o instanceof HTMLElement&&(e.push(o),o.shadowRoot!==null&&o.shadowRoot.mode==="open"&&n(o.shadowRoot)),[...o.children].forEach(d=>n(d))}n(t);const i=e.find(o=>m(o))??null,s=e.reverse().find(o=>m(o))??null;return{start:i,end:s}}let a=[];class U{constructor(e){this.tabDirection="forward",this.element=e,this.handleFocusIn=this.handleFocusIn.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this)}activate(){a.push(this.element),document.addEventListener("focusin",this.handleFocusIn),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}deactivate(){a=a.filter(e=>e!==this.element),document.removeEventListener("focusin",this.handleFocusIn),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}isActive(){return a[a.length-1]===this.element}checkFocus(){if(this.isActive()&&!this.element.matches(":focus-within")){const{start:e,end:n}=L(this.element),i=this.tabDirection==="forward"?e:n;typeof(i==null?void 0:i.focus)=="function"&&i.focus({preventScroll:!0})}}handleFocusIn(){this.checkFocus()}handleKeyDown(e){e.key==="Tab"&&e.shiftKey&&(this.tabDirection="backward"),requestAnimationFrame(()=>this.checkFocus())}handleKeyUp(){this.tabDirection="forward"}}const C=t=>v(t)&&!(t.startsWith("<")&&t.endsWith(">"));b(["before","after"],(t,e)=>{c.fn[t]=function(...n){return e===1&&(n=n.reverse()),this.each((i,s)=>{const o=p(n[0])?[n[0].call(s,i,s.innerHTML)]:n;b(o,r=>{let d;C(r)?d=c(A(r,"div")):i&&E(r)?d=c(r.cloneNode(!0)):d=c(r),d[e?"insertAfter":"insertBefore"](s)})})}});c.fn.clone=function(){return this.map(function(){return this.cloneNode(!0)})};b(["prepend","append"],(t,e)=>{c.fn[t]=function(...n){return this.each((i,s)=>{const o=s.childNodes,r=o.length,d=r?o[e?r-1:0]:K("div");r||S(s,d);let h=p(n[0])?[n[0].call(s,i,s.innerHTML)]:n;i&&(h=h.map(u=>v(u)?u:c(u).clone())),c(d)[e?"after":"before"](...h),r||D(d)})}});let f;const M=t=>{if(F(document))return 0;if(f===void 0){const e=c("<div>").css({width:"100%",height:"200px"}),n=c("<div>").css({position:"absolute",top:"0",left:"0",pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}).append(e).appendTo(document.body),i=e[0].offsetWidth;n.css("overflow","scroll");let s=e[0].offsetWidth;i===s&&(s=n[0].clientWidth),n.remove(),f=i-s}return f},N=t=>t.scrollHeight>t.clientHeight,l=new WeakMap,y="mdui-lock-screen",$=(t,e)=>{const n=w();e??(e=n.documentElement),l.has(e)||l.set(e,new Set),l.get(e).add(t);const s=c(e);N(e)&&s.css("width",`calc(100% - ${M()}px)`),s.addClass(y)},x=(t,e)=>{const n=w();e??(e=n.documentElement);const i=l.get(e);i&&(i.delete(t),i.size===0&&(l.delete(e),c(e).removeClass(y).width("")))};export{U as M,$ as l,x as u};
