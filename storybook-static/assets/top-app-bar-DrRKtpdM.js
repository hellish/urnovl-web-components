import{_ as r,n as a,h as v,d as T,c as S}from"./class-map-CWCTosL-.js";import{i as b,k as y}from"./entry-preview-BcHUnPw7.js";import{o as C}from"./query-assigned-elements-BInJlOXT.js";import{w as m}from"./watch-ByvFYHv8.js";import{D as B,$ as p,b as g}from"./get-IZFZkHlF.js";import{L as k}from"./layout-item-base-0Jyw3Jj3.js";const u=new WeakMap,w=f=>{class e extends f{constructor(...t){super(...t),this.scrollBehaviorDefinedController=new B(this,{needDomReady:!0}),this.lastScrollTopThreshold=0,this.lastScrollTopNoThreshold=0,this.isParentLayout=!1,this.onListeningScroll=this.onListeningScroll.bind(this)}get scrollPaddingPosition(){throw new Error("Must implement scrollPaddingPosition getter")}async onScrollTargetChange(t,o){const i=this.hasUpdated;if(await this.scrollBehaviorDefinedController.whenDefined(),i&&(this.setContainerPadding("remove",t),this.setContainerPadding("add",o)),!this.scrollBehavior)return;const n=this.getListening(t);n&&n.removeEventListener("scroll",this.onListeningScroll);const d=this.getListening(o);d&&(this.updateScrollTop(d),d.addEventListener("scroll",this.onListeningScroll))}async onScrollBehaviorChange(){await this.scrollBehaviorDefinedController.whenDefined();const t=this.getListening(this.scrollTarget);t&&(this.scrollBehavior?(this.updateScrollTop(t),t.addEventListener("scroll",this.onListeningScroll)):t.removeEventListener("scroll",this.onListeningScroll))}connectedCallback(){super.connectedCallback(),this.scrollBehaviorDefinedController.whenDefined().then(()=>{this.isParentLayout=v(this.parentElement,"mdui-layout"),this.setContainerPadding("add",this.scrollTarget)})}disconnectedCallback(){super.disconnectedCallback(),this.scrollBehaviorDefinedController.whenDefined().then(()=>{this.setContainerPadding("remove",this.scrollTarget)})}hasScrollBehavior(t){var i;const o=((i=this.scrollBehavior)==null?void 0:i.split(" "))??[];return Array.isArray(t)?!!o.filter(n=>t.includes(n)).length:o.includes(t)}runScrollThreshold(t,o){}runScrollNoThreshold(t,o){}setContainerPadding(t,o){const i=this.getContainer(o);if(!i||this.isParentLayout)return;const n=this.scrollPaddingPosition,d=n==="top"?"paddingTop":"paddingBottom";if(t==="add"||t==="update"){const l=["fixed","absolute"].includes(p(this).css("position"))?this.offsetHeight:null;if(p(i).css({[d]:l}),t==="add"&&l!==null){const c=u.get(i)??{top:[],bottom:[]};c[n].push(this),u.set(i,c)}}if(t==="remove"){const l=u.get(i);if(!l)return;const c=l[n].indexOf(this);c>-1&&(l[n].splice(c,1),u.set(i,l)),l[n].length||p(i).css({[d]:null})}}onListeningScroll(){const t=this.getListening(this.scrollTarget);window.requestAnimationFrame(()=>this.onScroll(t))}onScroll(t){const o=t.scrollY??t.scrollTop;this.lastScrollTopNoThreshold!==o&&(this.runScrollNoThreshold(o<this.lastScrollTopNoThreshold,o),this.lastScrollTopNoThreshold=o),Math.abs(o-this.lastScrollTopThreshold)>(this.scrollThreshold||0)&&(this.runScrollThreshold(o<this.lastScrollTopThreshold,o),this.lastScrollTopThreshold=o)}updateScrollTop(t){this.lastScrollTopThreshold=this.lastScrollTopNoThreshold=t.scrollY??t.scrollTop}getListening(t){return t?p(t)[0]:window}getContainer(t){return t?p(t)[0]:document.body}}return r([a({attribute:"scroll-target"})],e.prototype,"scrollTarget",void 0),r([a({reflect:!0,attribute:"scroll-behavior"})],e.prototype,"scrollBehavior",void 0),r([a({type:Number,reflect:!0,attribute:"scroll-threshold"})],e.prototype,"scrollThreshold",void 0),r([m("scrollTarget")],e.prototype,"onScrollTargetChange",null),r([m("scrollBehavior")],e.prototype,"onScrollBehaviorChange",null),e},L=b`:host{--shape-corner:var(--mdui-shape-corner-none);--z-index:2000;position:fixed;top:0;right:0;left:0;display:flex;flex:0 0 auto;align-items:flex-start;justify-content:flex-start;border-bottom-left-radius:var(--shape-corner);border-bottom-right-radius:var(--shape-corner);z-index:var(--z-index);transition:top var(--mdui-motion-duration-long2) var(--mdui-motion-easing-standard),height var(--mdui-motion-duration-long2) var(--mdui-motion-easing-standard),box-shadow var(--mdui-motion-duration-short4) var(--mdui-motion-easing-linear),background-color var(--mdui-motion-duration-short4) var(--mdui-motion-easing-linear);padding:.75rem .5rem;height:4rem;background-color:rgb(var(--mdui-color-surface))}:host([scroll-target]:not([scroll-target=''])){position:absolute}:host([scroll-behavior~=shrink]){transition-duration:var(--mdui-motion-duration-short4)}:host([scrolling]){background-color:rgb(var(--mdui-color-surface-container));box-shadow:var(--mdui-elevation-level2)}::slotted(mdui-button-icon){color:rgb(var(--mdui-color-on-surface-variant));font-size:1.5rem}::slotted(mdui-button-icon:first-child){color:rgb(var(--mdui-color-on-surface))}::slotted(mdui-avatar){width:1.875rem;height:1.875rem;margin-top:.3125rem;margin-bottom:.3125rem}::slotted(*){flex-shrink:0}::slotted(:not(:last-child)){margin-right:.5rem}:host([variant=medium]){height:7rem}:host([variant=large]){height:9.5rem}:host([hide]:not([hide=false i])){transition-duration:var(--mdui-motion-duration-short4);top:-4.625rem}:host([hide][variant=medium]:not([hide=false i])){top:-7.625rem}:host([hide][variant=large]:not([hide=false i])){top:-10.125rem}:host([shrink][variant=large]:not([shrink=false i])),:host([shrink][variant=medium]:not([shrink=false i])){transition-duration:var(--mdui-motion-duration-short4);height:4rem}`;let s=class extends w(k){constructor(){super(...arguments),this.variant="small",this.hide=!1,this.shrink=!1,this.scrolling=!1}get scrollPaddingPosition(){return"top"}get layoutPlacement(){return"top"}async onVariantChange(){this.hasUpdated?this.addEventListener("transitionend",async()=>{await this.scrollBehaviorDefinedController.whenDefined(),this.setContainerPadding("update",this.scrollTarget)},{once:!0}):await this.updateComplete,this.titleElements.forEach(e=>{e.variant=this.variant})}async onShrinkChange(){this.hasUpdated||await this.updateComplete,this.titleElements.forEach(e=>{e.shrink=this.shrink})}firstUpdated(e){super.firstUpdated(e),this.addEventListener("transitionend",h=>{h.target===this&&this.emit(this.hide?"hidden":"shown")})}render(){return y`<slot></slot>`}runScrollNoThreshold(e,h){this.hasScrollBehavior("shrink")&&e&&h<8&&(this.shrink=!1)}runScrollThreshold(e,h){this.hasScrollBehavior("elevate")&&(this.scrolling=!!h),this.hasScrollBehavior("shrink")&&(e||(this.shrink=!0)),this.hasScrollBehavior("hide")&&(!e&&!this.hide&&this.emit("hide",{cancelable:!0})&&(this.hide=!0),e&&this.hide&&this.emit("show",{cancelable:!0})&&(this.hide=!1))}};s.styles=[T,L];r([a({reflect:!0})],s.prototype,"variant",void 0);r([a({type:Boolean,reflect:!0,converter:g})],s.prototype,"hide",void 0);r([a({type:Boolean,reflect:!0,converter:g})],s.prototype,"shrink",void 0);r([a({reflect:!0,attribute:"scroll-behavior"})],s.prototype,"scrollBehavior",void 0);r([a({type:Boolean,reflect:!0,converter:g})],s.prototype,"scrolling",void 0);r([C({selector:"mdui-top-app-bar-title",flatten:!0})],s.prototype,"titleElements",void 0);r([m("variant")],s.prototype,"onVariantChange",null);r([m("shrink")],s.prototype,"onShrinkChange",null);s=r([S("mdui-top-app-bar")],s);
