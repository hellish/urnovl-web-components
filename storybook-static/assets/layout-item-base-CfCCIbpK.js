import{$ as c,j as p,_ as y,n as O,M as b}from"./get-w4emotEH.js";import{w as I}from"./watch-ByvFYHv8.js";import{o as L}from"./observeResize-CYvww9Tt.js";class N{constructor(){this.states=[]}registerMain(t){this.$main=c(t)}unregisterMain(){this.$main=void 0}registerItem(t){const e={element:t};this.states.push(e),e.observeResize=L(e.element,()=>{this.updateLayout(e.element,{width:this.isNoWidth(e)?0:void 0})}),this.items=void 0,this.resort(),this.updateLayout()}unregisterItem(t){var i;const e=this.states.findIndex(a=>a.element===t);if(e<0)return;(i=this.states[e].observeResize)==null||i.unobserve(),this.items=void 0,this.states.splice(e,1),this.states[e]&&this.updateLayout(this.states[e].element)}getItems(){if(!this.items){const t=this.states.map(e=>e.element);this.items=t.sort((e,o)=>{const i=e.compareDocumentPosition(o);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}return this.items}getMain(){return this.$main?this.$main[0]:void 0}getItemsAndMain(){return[...this.getItems(),this.getMain()].filter(t=>t)}updateOrder(){this.resort(),this.updateLayout()}updateLayout(t,e){const o=t?{element:t,width:e==null?void 0:e.width,height:e==null?void 0:e.height}:void 0,i=o?this.states.findIndex(s=>s.element===o.element):0;if(i<0)return;Object.assign(this.states[i],o),this.states.forEach((s,d)=>{if(d<i)return;const r=s.element.layoutPlacement,n=d>0?this.states[d-1]:void 0,l=(n==null?void 0:n.top)??0,u=(n==null?void 0:n.right)??0,f=(n==null?void 0:n.bottom)??0,g=(n==null?void 0:n.left)??0;switch(Object.assign(s,{top:l,right:u,bottom:f,left:g}),r){case"top":case"bottom":s[r]+=s.height??s.element.offsetHeight;break;case"right":case"left":s[r]+=(this.isNoWidth(s)?0:s.width)??s.element.offsetWidth;break}s.height=s.width=void 0,c(s.element).css({position:"absolute",top:r==="bottom"?null:l,right:r==="left"?null:u,bottom:r==="top"?null:f,left:r==="right"?null:g})});const a=this.states[this.states.length-1];this.$main&&this.$main.css({paddingTop:a.top,paddingRight:a.right,paddingBottom:a.bottom,paddingLeft:a.left})}resort(){const t=this.getItems();this.states.sort((e,o)=>{const i=e.element.order??0,a=o.element.order??0;return i>a?1:i<a?-1:t.indexOf(e.element)>t.indexOf(o.element)?1:t.indexOf(e.element)<t.indexOf(o.element)?-1:0})}isNoWidth(t){return p(t.element,"mdui-navigation-drawer")&&t.element.isModal}}const m=new WeakMap,w=h=>(m.has(h)||m.set(h,new N),m.get(h));class M extends b{constructor(){super(...arguments),this.isParentLayout=!1}get layoutPlacement(){throw new Error("Must implement placement getter!")}onOrderChange(){var t;(t=this.layoutManager)==null||t.updateOrder()}connectedCallback(){super.connectedCallback();const t=this.parentElement;this.isParentLayout=p(t,"mdui-layout"),this.isParentLayout&&(this.layoutManager=w(t),this.layoutManager.registerItem(this))}disconnectedCallback(){super.disconnectedCallback(),this.layoutManager&&this.layoutManager.unregisterItem(this)}}y([O({type:Number,reflect:!0})],M.prototype,"order",void 0);y([I("order",!0)],M.prototype,"onOrderChange",null);export{M as L};
