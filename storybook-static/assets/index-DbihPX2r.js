import{h as P,_ as o,n as l,b as R,c as T,k as O}from"./class-map-D9WDFjdt.js";import{i as z,k as b}from"./entry-preview-BcHUnPw7.js";import{i as k,D as x,K as w,$ as C,b as h}from"./get-CrYa75fC.js";import{n as E}from"./when-BxLAFfhK.js";import"./index-DSnKAvJF.js";import{w as u}from"./watch-ByvFYHv8.js";import{g,a as L,b as p,s as D}from"./motion-Dh4Evn1U.js";import{b as A}from"./breakpoint-Cm4z_iZg.js";import{l as M,u as y,M as $}from"./scroll-BUAW1aQb.js";import{o as B}from"./observeResize-CJw6rTQh.js";import{L as S}from"./layout-item-base-S8oB_A9g.js";const I=z`:host{--shape-corner:var(--mdui-shape-corner-large);--z-index:2200;display:none;position:fixed;top:0;bottom:0;left:0;z-index:1;width:22.5rem}:host([placement=right]){left:initial;right:0}:host([mobile]),:host([modal]:not([modal=false i])){top:0!important;right:0;bottom:0!important;width:initial;z-index:var(--z-index)}:host([placement=right][mobile]),:host([placement=right][modal]:not([modal=false i])){left:0}:host([contained]:not([contained=false i])){position:absolute}.overlay{position:absolute;inset:0;z-index:inherit;background-color:rgba(var(--mdui-color-scrim),.4)}.panel{display:block;position:absolute;top:0;bottom:0;left:0;width:100%;overflow:auto;z-index:inherit;background-color:rgb(var(--mdui-color-surface));box-shadow:var(--mdui-elevation-level0)}:host([mobile]) .panel,:host([modal]:not([modal=false i])) .panel{border-radius:0 var(--shape-corner) var(--shape-corner) 0;max-width:80%;width:22.5rem;background-color:rgb(var(--mdui-color-surface-container-low));box-shadow:var(--mdui-elevation-level1)}:host([placement=right]) .panel{left:initial;right:0}:host([placement=right][mobile]) .panel,:host([placement=right][modal]:not([modal=false i])) .panel{border-radius:var(--shape-corner) 0 0 var(--shape-corner)}`;let a=class extends S{constructor(){super(...arguments),this.open=!1,this.modal=!1,this.closeOnEsc=!1,this.closeOnOverlayClick=!1,this.placement="left",this.contained=!1,this.mobile=!1,this.overlayRef=k(),this.panelRef=k(),this.definedController=new x(this,{needDomReady:!0})}get layoutPlacement(){return this.placement}get lockTarget(){return this.contained||this.isParentLayout?this.parentElement:document.documentElement}get isModal(){return this.mobile||this.modal}async onContainedChange(){var t;await this.definedController.whenDefined(),(t=this.observeResize)==null||t.unobserve(),this.setObserveResize()}onPlacementChange(){this.isParentLayout&&this.layoutManager.updateLayout(this)}async onMobileChange(){!this.open||this.isParentLayout||this.contained||(await this.definedController.whenDefined(),this.isModal?(M(this,this.lockTarget),await this.getLockTargetAnimate(!1,0)):(y(this,this.lockTarget),await this.getLockTargetAnimate(!0,0)))}async onOpenChange(){let t=this.panelRef.value,n=this.overlayRef.value;const c=this.placement==="right",d=g(this,"linear"),m=g(this,"emphasized"),f=(e,i)=>{C(this.layoutManager.getItemsAndMain()).css("transition",O(e)?null:`all ${e}ms ${i}`)},v=async()=>{const e=[];if(this.isModal?e.push(n,t):this.isParentLayout||e.push(this.lockTarget),this.isParentLayout){const i=this.layoutManager.getItemsAndMain(),s=i.indexOf(this);e.push(...i.slice(s))}!this.isModal&&!e.includes(this)&&e.push(this),await Promise.all(e.map(i=>D(i)))};if(this.open){const e=this.hasUpdated;if(e||(await this.updateComplete,t=this.panelRef.value,n=this.overlayRef.value),e&&!this.emit("open",{cancelable:!0}))return;await this.definedController.whenDefined(),this.style.display="block",this.originalTrigger=document.activeElement,this.isModal&&(this.modalHelper.activate(),this.contained||M(this,this.lockTarget)),await v(),requestAnimationFrame(()=>{const r=this.querySelector("[autofocus]");r?r.focus({preventScroll:!0}):t.focus({preventScroll:!0})});const i=L(this,"long2"),s=[];if(this.isModal?s.push(p(n,[{opacity:0},{opacity:1,offset:.3},{opacity:1}],{duration:e?i:0,easing:d})):this.isParentLayout||s.push(this.getLockTargetAnimate(!0,e?i:0)),this.isParentLayout&&e&&(f(i,m),this.layoutManager.updateLayout(this)),s.push(p(this.isModal?t:this,[{transform:`translateX(${c?"":"-"}100%)`},{transform:"translateX(0)"}],{duration:e?i:0,easing:m})),await Promise.all(s),!this.open)return;this.isParentLayout&&e&&f(null),e&&this.emit("opened")}else if(this.hasUpdated){if(!this.emit("close",{cancelable:!0}))return;await this.definedController.whenDefined(),this.isModal&&this.modalHelper.deactivate(),await v();const i=L(this,"short4"),s=[];if(this.isModal?s.push(p(n,[{opacity:1},{opacity:0}],{duration:i,easing:d})):this.isParentLayout||s.push(this.getLockTargetAnimate(!1,i)),this.isParentLayout&&(f(i,m),this.layoutManager.updateLayout(this,{width:0})),s.push(p(this.isModal?t:this,[{transform:"translateX(0)"},{transform:`translateX(${c?"":"-"}100%)`}],{duration:i,easing:m})),await Promise.all(s),this.open)return;this.isParentLayout&&f(null),this.style.display="none",this.isModal&&!this.contained&&y(this,this.lockTarget);const r=this.originalTrigger;R(r==null?void 0:r.focus)&&setTimeout(()=>r.focus()),this.emit("closed")}}connectedCallback(){super.connectedCallback(),this.modalHelper=new $(this),this.definedController.whenDefined().then(()=>{this.setObserveResize()})}disconnectedCallback(){var t;super.disconnectedCallback(),y(this,this.lockTarget),(t=this.observeResize)==null||t.unobserve()}firstUpdated(t){super.firstUpdated(t),this.addEventListener("keydown",n=>{this.open&&this.closeOnEsc&&n.key==="Escape"&&this.isModal&&(n.stopPropagation(),this.open=!1)})}render(){return b`${E(this.isModal,()=>b`<div ${w(this.overlayRef)} part="overlay" class="overlay" @click="${this.onOverlayClick}"></div>`)}<slot ${w(this.panelRef)} part="panel" class="panel" tabindex="0"></slot>`}setObserveResize(){this.observeResize=B(this.contained?this.parentElement:document.documentElement,()=>{const t=this.contained?this.parentElement:void 0;this.mobile=A(t).down("md"),this.isParentLayout&&this.layoutManager.updateLayout(this,{width:this.isModal?0:void 0})})}onOverlayClick(){this.emit("overlay-click"),this.closeOnOverlayClick&&(this.open=!1)}getLockTargetAnimate(t,n){const c=this.placement==="right"?"paddingRight":"paddingLeft",d=C(this.panelRef.value).innerWidth()+"px";return p(this.lockTarget,[{[c]:t?0:d},{[c]:t?d:0}],{duration:n,easing:g(this,"emphasized"),fill:"forwards"})}};a.styles=[P,I];o([l({type:Boolean,reflect:!0,converter:h})],a.prototype,"open",void 0);o([l({type:Boolean,reflect:!0,converter:h})],a.prototype,"modal",void 0);o([l({type:Boolean,reflect:!0,converter:h,attribute:"close-on-esc"})],a.prototype,"closeOnEsc",void 0);o([l({type:Boolean,reflect:!0,converter:h,attribute:"close-on-overlay-click"})],a.prototype,"closeOnOverlayClick",void 0);o([l({reflect:!0})],a.prototype,"placement",void 0);o([l({type:Boolean,reflect:!0,converter:h})],a.prototype,"contained",void 0);o([l({type:Boolean,reflect:!0,converter:h})],a.prototype,"mobile",void 0);o([u("contained",!0)],a.prototype,"onContainedChange",null);o([u("placement",!0)],a.prototype,"onPlacementChange",null);o([u("mobile",!0),u("modal",!0)],a.prototype,"onMobileChange",null);o([u("open")],a.prototype,"onOpenChange",null);a=o([T("mdui-navigation-drawer")],a);
