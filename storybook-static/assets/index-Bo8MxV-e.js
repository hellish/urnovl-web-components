import{l as x,m as R,o as T,$ as v,h as O,k as z,_ as s,n as u,d as k,D as E,b as D,K as C,f as m,c as A,p as $}from"./get-w4emotEH.js";import{i as B,k as L}from"./entry-preview-BcHUnPw7.js";import{n as S}from"./when-BxLAFfhK.js";import"./index-D2jzjD89.js";import{w as y}from"./watch-ByvFYHv8.js";import{g as b,a as M,b as g,s as N}from"./motion-Dvf13IR2.js";import{l as P,u as w,M as W}from"./scroll-Nrg22M-p.js";import{o as I}from"./observeResize-CYvww9Tt.js";import{L as U}from"./layout-item-base-CfCCIbpK.js";const F=f=>{const t=x(),n=R(),c=t.getComputedStyle(n.documentElement),l=T(f)?v(f).innerWidth():O(f)?f:v(t).innerWidth(),d=i=>{const e=c.getPropertyValue(`--mdui-breakpoint-${i}`).toLowerCase();return parseFloat(e)},p=i=>{switch(i){case"xs":return"sm";case"sm":return"md";case"md":return"lg";case"lg":return"xl";case"xl":return"xxl"}};return{up(i){return l>=d(i)},down(i){return l<d(i)},only(i){return i==="xxl"?this.up(i):this.up(i)&&this.down(p(i))},not(i){return!this.only(i)},between(i,e){return this.up(i)&&this.down(e)}}},X=B`:host{--shape-corner:var(--mdui-shape-corner-large);--z-index:2200;display:none;position:fixed;top:0;bottom:0;left:0;z-index:1;width:22.5rem}:host([placement=right]){left:initial;right:0}:host([mobile]),:host([modal]:not([modal=false i])){top:0!important;right:0;bottom:0!important;width:initial;z-index:var(--z-index)}:host([placement=right][mobile]),:host([placement=right][modal]:not([modal=false i])){left:0}:host([contained]:not([contained=false i])){position:absolute}.overlay{position:absolute;inset:0;z-index:inherit;background-color:rgba(var(--mdui-color-scrim),.4)}.panel{display:block;position:absolute;top:0;bottom:0;left:0;width:100%;overflow:auto;z-index:inherit;background-color:rgb(var(--mdui-color-surface));box-shadow:var(--mdui-elevation-level0)}:host([mobile]) .panel,:host([modal]:not([modal=false i])) .panel{border-radius:0 var(--shape-corner) var(--shape-corner) 0;max-width:80%;width:22.5rem;background-color:rgb(var(--mdui-color-surface-container-low));box-shadow:var(--mdui-elevation-level1)}:host([placement=right]) .panel{left:initial;right:0}:host([placement=right][mobile]) .panel,:host([placement=right][modal]:not([modal=false i])) .panel{border-radius:var(--shape-corner) 0 0 var(--shape-corner)}`;let a=class extends U{constructor(){super(...arguments),this.open=!1,this.modal=!1,this.closeOnEsc=!1,this.closeOnOverlayClick=!1,this.placement="left",this.contained=!1,this.mobile=!1,this.overlayRef=k(),this.panelRef=k(),this.definedController=new E(this,{needDomReady:!0})}get layoutPlacement(){return this.placement}get lockTarget(){return this.contained||this.isParentLayout?this.parentElement:document.documentElement}get isModal(){return this.mobile||this.modal}async onContainedChange(){var t;await this.definedController.whenDefined(),(t=this.observeResize)==null||t.unobserve(),this.setObserveResize()}onPlacementChange(){this.isParentLayout&&this.layoutManager.updateLayout(this)}async onMobileChange(){!this.open||this.isParentLayout||this.contained||(await this.definedController.whenDefined(),this.isModal?(P(this,this.lockTarget),await this.getLockTargetAnimate(!1,0)):(w(this,this.lockTarget),await this.getLockTargetAnimate(!0,0)))}async onOpenChange(){let t=this.panelRef.value,n=this.overlayRef.value;const c=this.placement==="right",l=b(this,"linear"),d=b(this,"emphasized"),p=(e,o)=>{v(this.layoutManager.getItemsAndMain()).css("transition",$(e)?null:`all ${e}ms ${o}`)},i=async()=>{const e=[];if(this.isModal?e.push(n,t):this.isParentLayout||e.push(this.lockTarget),this.isParentLayout){const o=this.layoutManager.getItemsAndMain(),r=o.indexOf(this);e.push(...o.slice(r))}!this.isModal&&!e.includes(this)&&e.push(this),await Promise.all(e.map(o=>N(o)))};if(this.open){const e=this.hasUpdated;if(e||(await this.updateComplete,t=this.panelRef.value,n=this.overlayRef.value),e&&!this.emit("open",{cancelable:!0}))return;await this.definedController.whenDefined(),this.style.display="block",this.originalTrigger=document.activeElement,this.isModal&&(this.modalHelper.activate(),this.contained||P(this,this.lockTarget)),await i(),requestAnimationFrame(()=>{const h=this.querySelector("[autofocus]");h?h.focus({preventScroll:!0}):t.focus({preventScroll:!0})});const o=M(this,"long2"),r=[];if(this.isModal?r.push(g(n,[{opacity:0},{opacity:1,offset:.3},{opacity:1}],{duration:e?o:0,easing:l})):this.isParentLayout||r.push(this.getLockTargetAnimate(!0,e?o:0)),this.isParentLayout&&e&&(p(o,d),this.layoutManager.updateLayout(this)),r.push(g(this.isModal?t:this,[{transform:`translateX(${c?"":"-"}100%)`},{transform:"translateX(0)"}],{duration:e?o:0,easing:d})),await Promise.all(r),!this.open)return;this.isParentLayout&&e&&p(null),e&&this.emit("opened")}else if(this.hasUpdated){if(!this.emit("close",{cancelable:!0}))return;await this.definedController.whenDefined(),this.isModal&&this.modalHelper.deactivate(),await i();const o=M(this,"short4"),r=[];if(this.isModal?r.push(g(n,[{opacity:1},{opacity:0}],{duration:o,easing:l})):this.isParentLayout||r.push(this.getLockTargetAnimate(!1,o)),this.isParentLayout&&(p(o,d),this.layoutManager.updateLayout(this,{width:0})),r.push(g(this.isModal?t:this,[{transform:"translateX(0)"},{transform:`translateX(${c?"":"-"}100%)`}],{duration:o,easing:d})),await Promise.all(r),this.open)return;this.isParentLayout&&p(null),this.style.display="none",this.isModal&&!this.contained&&w(this,this.lockTarget);const h=this.originalTrigger;D(h==null?void 0:h.focus)&&setTimeout(()=>h.focus()),this.emit("closed")}}connectedCallback(){super.connectedCallback(),this.modalHelper=new W(this),this.definedController.whenDefined().then(()=>{this.setObserveResize()})}disconnectedCallback(){var t;super.disconnectedCallback(),w(this,this.lockTarget),(t=this.observeResize)==null||t.unobserve()}firstUpdated(t){super.firstUpdated(t),this.addEventListener("keydown",n=>{this.open&&this.closeOnEsc&&n.key==="Escape"&&this.isModal&&(n.stopPropagation(),this.open=!1)})}render(){return L`${S(this.isModal,()=>L`<div ${C(this.overlayRef)} part="overlay" class="overlay" @click="${this.onOverlayClick}"></div>`)}<slot ${C(this.panelRef)} part="panel" class="panel" tabindex="0"></slot>`}setObserveResize(){this.observeResize=I(this.contained?this.parentElement:document.documentElement,()=>{const t=this.contained?this.parentElement:void 0;this.mobile=F(t).down("md"),this.isParentLayout&&this.layoutManager.updateLayout(this,{width:this.isModal?0:void 0})})}onOverlayClick(){this.emit("overlay-click"),this.closeOnOverlayClick&&(this.open=!1)}getLockTargetAnimate(t,n){const c=this.placement==="right"?"paddingRight":"paddingLeft",l=v(this.panelRef.value).innerWidth()+"px";return g(this.lockTarget,[{[c]:t?0:l},{[c]:t?l:0}],{duration:n,easing:b(this,"emphasized"),fill:"forwards"})}};a.styles=[z,X];s([u({type:Boolean,reflect:!0,converter:m})],a.prototype,"open",void 0);s([u({type:Boolean,reflect:!0,converter:m})],a.prototype,"modal",void 0);s([u({type:Boolean,reflect:!0,converter:m,attribute:"close-on-esc"})],a.prototype,"closeOnEsc",void 0);s([u({type:Boolean,reflect:!0,converter:m,attribute:"close-on-overlay-click"})],a.prototype,"closeOnOverlayClick",void 0);s([u({reflect:!0})],a.prototype,"placement",void 0);s([u({type:Boolean,reflect:!0,converter:m})],a.prototype,"contained",void 0);s([u({type:Boolean,reflect:!0,converter:m})],a.prototype,"mobile",void 0);s([y("contained",!0)],a.prototype,"onContainedChange",null);s([y("placement",!0)],a.prototype,"onPlacementChange",null);s([y("mobile",!0),y("modal",!0)],a.prototype,"onMobileChange",null);s([y("open")],a.prototype,"onOpenChange",null);a=s([A("mdui-navigation-drawer")],a);
